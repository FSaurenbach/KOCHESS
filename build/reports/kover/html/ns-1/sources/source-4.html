


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>korge-hello-world Coverage Report > MainKt</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope: korge-hello-world<span class="separator">|</span>    <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">&lt;empty package name&gt;</a>
</div>

<h1>Coverage Summary for Class: MainKt (&lt;empty package name&gt;)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
<th class="coverageStat 
">
  Instruction, %
</th>
</tr>
<tr>
  <td class="name">MainKt</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/12)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/12)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/16)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/192)
  </span>
</td>
</tr>
  <tr>
    <td class="name">MainKt$main$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/101)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainKt$main$2$invokeSuspend$$inlined$changeTo-WPwdCS8$default$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">MainKt$main$2$invokeSuspend$$inlined$sceneContainer$default$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">MainKt$main$3</td>
    <td class="coverageStat"/>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/15)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/12)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/22)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/293)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;import korlibs.image.bitmap.*
&nbsp;import korlibs.image.color.*
&nbsp;import korlibs.image.format.*
&nbsp;import korlibs.io.file.std.*
&nbsp;import korlibs.korge.*
&nbsp;import korlibs.korge.input.*
&nbsp;import korlibs.korge.scene.*
&nbsp;import korlibs.korge.view.*
&nbsp;import korlibs.korge.view.filter.*
&nbsp;import korlibs.math.*
&nbsp;import korlibs.math.geom.*
&nbsp;
<b class="nc">&nbsp;val board = Array(8) { Array(8) { SolidRect(512 / 8, 512 / 8) } }</b>
&nbsp;
<b class="nc">&nbsp;var cells = ArrayList&lt;Cell&gt;()</b>
<b class="nc">&nbsp;var whitePawn: Bitmap? = null</b>
<b class="nc">&nbsp;var blackPawn: Bitmap? = null</b>
<b class="nc">&nbsp;var whiteRook: Bitmap? = null</b>
<b class="nc">&nbsp;var blackRook: Bitmap? = null</b>
<b class="nc">&nbsp;var lastClicked: Point? = null</b>
<b class="nc">&nbsp;var pieces = ArrayList&lt;Piece&gt;()</b>
<b class="nc">&nbsp;var whiteTurn = true</b>
<b class="nc">&nbsp;var markedCells = ArrayList&lt;Cell&gt;()</b>
<b class="nc">&nbsp;suspend fun main() = Korge(windowSize = Size(512, 512), backgroundColor = Colors[&quot;#2b2b2b&quot;]) {</b>
<b class="nc">&nbsp;    val sceneContainer = sceneContainer()</b>
&nbsp;
<b class="nc">&nbsp;    whitePawn = resourcesVfs[&quot;w_pawn.png&quot;].readBitmap()</b>
<b class="nc">&nbsp;    blackPawn = resourcesVfs[&quot;b_pawn.png&quot;].readBitmap()</b>
<b class="nc">&nbsp;    whiteRook = resourcesVfs[&quot;w_rook.png&quot;].readBitmap()</b>
<b class="nc">&nbsp;    blackRook = resourcesVfs[&quot;b_rook.png&quot;].readBitmap()</b>
<b class="nc">&nbsp;    sceneContainer.changeTo { GameScene(sceneContainer) }</b>
&nbsp;}
&nbsp;
&nbsp;
&nbsp;class GameScene(private val cont: SceneContainer) : PixelatedScene(512, 512) {
&nbsp;
&nbsp;
&nbsp;    override suspend fun SContainer.sceneMain() {
&nbsp;
&nbsp;        var d = 0
&nbsp;        for (cx in 0 until 8) {
&nbsp;            for (cy in 0 until 8) {
&nbsp;
&nbsp;                if (d.isEven) {
&nbsp;                    val cl = Cell(Colors.WHITE, cx, cy, cont)
&nbsp;                    cells.add(cl)
&nbsp;
&nbsp;
&nbsp;                } else {
&nbsp;                    val cl = Cell(Colors.BLACK, cx, cy, cont)
&nbsp;                    cells.add(cl)
&nbsp;
&nbsp;                }
&nbsp;                d++
&nbsp;            }
&nbsp;            d++
&nbsp;        }
&nbsp;        val pw1 = Piece(PieceKind.WhitePawn, Colors.WHITE, 0, 1, cont = cont)
&nbsp;        val pb1 = Piece(PieceKind.BlackPawn, Colors.BLACK, 0, 6, cont = cont)
&nbsp;        val pw2 = Piece(PieceKind.WhitePawn, Colors.WHITE, 1, 1, cont = cont)
&nbsp;        val pb2 = Piece(PieceKind.BlackPawn, Colors.BLACK, 1, 6, cont = cont)
&nbsp;        val pw3 = Piece(PieceKind.WhitePawn, Colors.WHITE, 2, 1, cont = cont)
&nbsp;        val pb3 = Piece(PieceKind.BlackPawn, Colors.BLACK, 2, 6, cont = cont)
&nbsp;        val pw4 = Piece(PieceKind.WhitePawn, Colors.WHITE, 3, 1, cont = cont)
&nbsp;        val pb4 = Piece(PieceKind.BlackPawn, Colors.BLACK, 3, 6, cont = cont)
&nbsp;        val pw5 = Piece(PieceKind.WhitePawn, Colors.WHITE, 4, 1, cont = cont)
&nbsp;        val pb5 = Piece(PieceKind.BlackPawn, Colors.BLACK, 4, 6, cont = cont)
&nbsp;        val pw6 = Piece(PieceKind.WhitePawn, Colors.WHITE, 5, 1, cont = cont)
&nbsp;        val pb6 = Piece(PieceKind.BlackPawn, Colors.BLACK, 5, 6, cont = cont)
&nbsp;        val pw7 = Piece(PieceKind.WhitePawn, Colors.WHITE, 6, 1, cont = cont)
&nbsp;        val pb7 = Piece(PieceKind.BlackPawn, Colors.BLACK, 6, 6, cont = cont)
&nbsp;        val pw8 = Piece(PieceKind.WhitePawn, Colors.WHITE, 7, 1, cont = cont)
&nbsp;        val pb8 = Piece(PieceKind.BlackPawn, Colors.BLACK, 7, 6, cont = cont)
&nbsp;        // Rooks
&nbsp;        val rw1 = Piece(PieceKind.WhiteRook, Colors.WHITE, 5, 5, cont = cont)
&nbsp;        val rb1 = Piece(PieceKind.BlackRook, Colors.BLACK, 3, 3, cont = cont)
&nbsp;        pieces.add(pw1)
&nbsp;        pieces.add(pb1)
&nbsp;        pieces.add(pw2)
&nbsp;        pieces.add(pb2)
&nbsp;        pieces.add(pw3)
&nbsp;        pieces.add(pb3)
&nbsp;        pieces.add(pw4)
&nbsp;        pieces.add(pb4)
&nbsp;        pieces.add(pw5)
&nbsp;        pieces.add(pb5)
&nbsp;        pieces.add(pw6)
&nbsp;        pieces.add(pb6)
&nbsp;        pieces.add(pw7)
&nbsp;        pieces.add(pb7)
&nbsp;        pieces.add(pw8)
&nbsp;        pieces.add(pb8)
&nbsp;        pieces.add(rw1)
&nbsp;        pieces.add(rb1)
&nbsp;
&nbsp;
&nbsp;        var newPosition: Pair&lt;Int, Int&gt;? = null
&nbsp;        var currentPos: Pair&lt;Int, Int&gt;? = null
&nbsp;        var piss: Piece? = null
&nbsp;        draggableCloseable(onMouseDrag {
&nbsp;            newPosition = decodePosition(this.globalMousePos)
&nbsp;
&nbsp;        }) { info: DraggableInfo -&gt;
&nbsp;            if (info.start) {
&nbsp;                for (piece in pieces) {
&nbsp;
&nbsp;                    if (piece.position == board[newPosition!!.second][newPosition!!.first].pos) {
&nbsp;                        println(&quot;${piece.pieceKind}&quot;)
&nbsp;                        currentPos = newPosition
&nbsp;                        piss = piece
&nbsp;                        for (cell in cells) {
&nbsp;                            var clx = cell.cx
&nbsp;                            var cly = cell.cy
&nbsp;                            var clxy = Pair(clx, cly)
&nbsp;                            if (newPosition!! == Pair(clx, cly)) {
&nbsp;                                println(&quot;Found Cell where piece is located: $clx, $cly&quot;)
&nbsp;                            }
&nbsp;                            // Check where the piece can move to by using the move checker function and print out the location of the cells
&nbsp;                            if (piss!!.moveChecker(newPosition!!, clxy, false)) {
&nbsp;                                println(&quot;Can move to: $clx, $cly&quot;)
&nbsp;                                changeColor(cly, clx, false)
&nbsp;                                markedCells.add(cell)
&nbsp;                            }
&nbsp;
&nbsp;
&nbsp;                        }
&nbsp;
&nbsp;
&nbsp;                    }
&nbsp;                }
&nbsp;                // Go through every cell in cells and check with the move checker function on which cell the piece could move and print it out
&nbsp;
&nbsp;
&nbsp;            }
&nbsp;            if (info.end &amp;&amp; piss != null) {
&nbsp;                println(&quot;pieceKind: ${piss!!.pieceKind} location: ${decodePosition(piss!!.position)}&quot;)
&nbsp;                println(&quot;End \n \n \n \n \n&quot;)
&nbsp;                if (piss!!.moveChecker(currentPos!!, newPosition!!, true)) piss!!.moveTo(
&nbsp;                    newPosition!!.first, newPosition!!.second
&nbsp;                )
&nbsp;                else piss!!.moveTo(currentPos!!.first, currentPos!!.second)
&nbsp;                for (cell in markedCells) {
&nbsp;                    changeColor(cell.cy, cell.cx, true)
&nbsp;                }
&nbsp;                markedCells.clear()
&nbsp;
&nbsp;                piss = null
&nbsp;
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;}
&nbsp;
&nbsp;fun changeColor(cly: Int, clx: Int, back: Boolean) {
<b class="nc">&nbsp;    if (back) {</b>
<b class="nc">&nbsp;        for (cell in cells) {</b>
<b class="nc">&nbsp;            if (cell.cx == clx &amp;&amp; cell.cy == cly) {</b>
<b class="nc">&nbsp;                board[cly][clx].filter = null</b>
&nbsp;            }
&nbsp;        }
&nbsp;    } else {
<b class="nc">&nbsp;        board[cly][clx].filter = BlurFilter(20.0)</b>
&nbsp;    }
&nbsp;
&nbsp;}
&nbsp;
&nbsp;// Check if a piece is in the way of a rook
&nbsp;
&nbsp;
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-03-02 10:19</div>
</div>
</body>
</html>
